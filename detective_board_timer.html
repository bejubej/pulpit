<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AKTA SPRAWY #4782</title>

<style>
:root {
  --bg: #0a0a0a;
  --red: #c41e3a;
  --yellow: #d4af37;
  --text: #e8e8e8;
  --border: #2a2a2a;
  --card-bg: #151515;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Courier New', monospace;
  padding: 20px;
  min-height: 100vh;
  background-image: 
    repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,.03) 2px, rgba(255,255,255,.03) 4px);
}

header {
  text-align: center;
  margin-bottom: 40px;
  padding-bottom: 20px;
  border-bottom: 2px solid var(--red);
}

.case-number {
  font-size: 0.9rem;
  color: var(--yellow);
  letter-spacing: 3px;
  margin-bottom: 10px;
}

h1 {
  font-size: 2rem;
  letter-spacing: 4px;
  position: relative;
  display: inline-block;
  text-shadow: 0 0 10px var(--red);
}

.glitch {
  position: relative;
}

.glitch::before,
.glitch::after {
  content: attr(data-text);
  position: absolute;
  left: 0;
  width: 100%;
  color: var(--red);
  opacity: 0.8;
}

.glitch::before {
  top: -2px;
  animation: glitch1 2s infinite;
}

.glitch::after {
  top: 2px;
  animation: glitch2 2.5s infinite;
}

@keyframes glitch1 {
  0%, 100% { clip-path: inset(0 0 85% 0); opacity: 0; }
  10% { clip-path: inset(0 0 80% 0); opacity: 0.8; }
  20% { clip-path: inset(0 0 85% 0); opacity: 0; }
}

@keyframes glitch2 {
  0%, 100% { clip-path: inset(85% 0 0 0); opacity: 0; }
  15% { clip-path: inset(80% 0 0 0); opacity: 0.8; }
  25% { clip-path: inset(85% 0 0 0); opacity: 0; }
}

.subtitle {
  margin-top: 15px;
  font-size: 0.85rem;
  color: #888;
  font-style: italic;
}

.stats {
  display: flex;
  justify-content: center;
  gap: 30px;
  margin-bottom: 30px;
  padding: 15px;
  background: var(--card-bg);
  border: 1px solid var(--border);
}

.stat {
  text-align: center;
}

.stat-value {
  font-size: 1.8rem;
  color: var(--yellow);
  font-weight: bold;
}

.stat-label {
  font-size: 0.7rem;
  color: #666;
  text-transform: uppercase;
  margin-top: 5px;
}

.puzzle-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 40px;
}

.puzzle-card {
  background: var(--card-bg);
  border: 2px solid var(--border);
  padding: 20px;
  position: relative;
  transition: all 0.3s;
  cursor: pointer;
}

.puzzle-card.locked {
  opacity: 0.4;
  cursor: not-allowed;
  filter: grayscale(100%);
}

.puzzle-card.unlocked {
  border-color: var(--yellow);
  box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
}

.puzzle-card.unlocked:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
}

.puzzle-card.solved {
  border-color: var(--red);
  background: linear-gradient(135deg, var(--card-bg) 0%, #1a0a0a 100%);
}

.puzzle-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
}

.puzzle-number {
  font-size: 0.8rem;
  color: var(--yellow);
  letter-spacing: 2px;
}

.puzzle-status {
  font-size: 1.2rem;
}

.puzzle-title {
  font-size: 1.1rem;
  margin-bottom: 10px;
  color: var(--text);
}

.puzzle-hint {
  font-size: 0.85rem;
  color: #888;
  line-height: 1.5;
  font-style: italic;
}

.unlock-code {
  margin-top: 15px;
  padding: 10px;
  background: rgba(255,255,255,0.05);
  border-left: 3px solid var(--red);
  font-size: 0.8rem;
  color: #666;
  font-family: monospace;
}

/* ===== PUZZLE INPUT ===== */
.puzzle-input-group {
  margin-top: 20px;
  display: flex;
  gap: 10px;
}

.puzzle-input {
  flex: 1;
  padding: 10px;
  background: rgba(0,0,0,0.5);
  border: 2px solid var(--border);
  color: var(--text);
  font-family: 'Courier New', monospace;
  font-size: 0.95rem;
  transition: all 0.3s;
}

.puzzle-input:focus {
  outline: none;
  border-color: var(--yellow);
  box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
}

.solve-btn {
  padding: 10px 20px;
  background: var(--yellow);
  color: #000;
  border: none;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  font-weight: bold;
  cursor: pointer;
  text-transform: uppercase;
  transition: all 0.3s;
  letter-spacing: 1px;
}

.solve-btn:hover {
  background: #f0d060;
  box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
}

.solve-btn:active {
  transform: scale(0.95);
}

.puzzle-solved-msg {
  margin-top: 20px;
  padding: 12px;
  background: rgba(0,255,0,0.1);
  border: 2px solid #0f0;
  color: #0f0;
  text-align: center;
  font-weight: bold;
  letter-spacing: 1px;
}

.shake {
  animation: shake 0.4s;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

/* ===== FINISH BUTTON ===== */
.finish-section {
  text-align: center;
  margin: 40px 0;
}

.finish-btn {
  padding: 20px 60px;
  background: var(--red);
  color: white;
  border: none;
  font-size: 1.2rem;
  font-family: 'Courier New', monospace;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 3px;
  transition: all 0.3s;
  box-shadow: 0 0 20px rgba(196, 30, 58, 0.4);
  animation: finishPulse 2s infinite;
}

@keyframes finishPulse {
  0%, 100% { box-shadow: 0 0 20px rgba(196, 30, 58, 0.4); }
  50% { box-shadow: 0 0 40px rgba(196, 30, 58, 0.8); }
}

.finish-btn:hover {
  background: #a01828;
  transform: scale(1.05);
  box-shadow: 0 5px 30px rgba(196, 30, 58, 0.7);
}

/* ===== MODAL ===== */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  z-index: 1000;
  animation: fadeIn 0.5s;
}

.modal.active {
  display: flex;
  justify-content: center;
  align-items: center;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal-content {
  background: var(--card-bg);
  border: 2px solid var(--red);
  padding: 40px;
  max-width: 800px;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 0 50px rgba(196, 30, 58, 0.5);
  position: relative;
}

.modal-content h2 {
  color: var(--red);
  text-align: center;
  margin-bottom: 30px;
  font-size: 1.8rem;
  letter-spacing: 3px;
  text-shadow: 0 0 10px var(--red);
}

.story-text {
  font-size: 1rem;
  line-height: 1.8;
  color: var(--text);
  text-align: justify;
  margin-bottom: 30px;
  white-space: pre-line;
}

.close-modal-btn {
  display: block;
  margin: 0 auto;
  padding: 15px 50px;
  background: var(--red);
  color: white;
  border: none;
  font-size: 1.1rem;
  font-family: 'Courier New', monospace;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 2px;
  transition: all 0.3s;
}

.close-modal-btn:hover {
  background: #a01828;
  box-shadow: 0 5px 20px rgba(196, 30, 58, 0.5);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  h1 { font-size: 1.5rem; }
  .puzzle-grid { grid-template-columns: 1fr; }
  .stats { flex-direction: column; gap: 15px; }
  .modal-content { padding: 20px; max-width: 95%; }
  .story-text { font-size: 0.9rem; }
}

@media (min-width: 1024px) {
  body {
    max-width: 1200px;
    margin: 0 auto;
  }
}
</style>
</head>

<body>

<header>
  <div class="case-number">SPRAWA #4782</div>
  <h1 class="glitch" data-text="TABLICA ÅšLEDZTWA">TABLICA ÅšLEDZTWA</h1>
  <div class="subtitle">System weryfikacji zagadek - Tylko dla upowaÅ¼nionych</div>
</header>

<div class="stats">
  <div class="stat">
    <div class="stat-value" id="solvedCount">0</div>
    <div class="stat-label">RozwiÄ…zane</div>
  </div>
  <div class="stat">
    <div class="stat-value" id="totalCount">8</div>
    <div class="stat-label">ÅÄ…cznie</div>
  </div>
  <div class="stat">
    <div class="stat-value" id="progressPercent">0%</div>
    <div class="stat-label">PostÄ™p</div>
  </div>
</div>

<div class="puzzle-grid" id="puzzleGrid"></div>

<div class="finish-section" id="finishSection" style="display:none;">
  <button class="finish-btn" onclick="openStoryModal()">âš ï¸ ZAKOÅƒCZ ÅšLEDZTWO âš ï¸</button>
</div>

<!-- MODAL ZE STRESZCZENIEM -->
<div class="modal" id="storyModal">
  <div class="modal-content">
    <h2 class="glitch" data-text="RAPORT KOÅƒCOWY">RAPORT KOÅƒCOWY</h2>
    <div class="story-text">
      RAPORT KOÅƒCOWY: UKÅAD PIOTRKOWSKI (1998)

      I. WstÄ™p
      Rok 1998. Polska transformacji ustrojowej, chaos prawny, sÅ‚abe kontrole instytucjonalne. W tym okresie do Piotrkowa Trybunalskiego powraca Tomasz Wolski â€“ doÅ›wiadczony dziennikarz Å›ledczy, ktÃ³ry wczeÅ›niej pracowaÅ‚ w warszawskich redakcjach. Wolski, znany z bezkompromisowoÅ›ci i uporu w dÄ…Å¼eniu do prawdy, szybko zaczyna interesowaÄ‡ siÄ™ lokalnym Å›rodowiskiem biznesowym.

      Jego uwagÄ™ przykuwa Janusz SkowroÅ„ski â€“ lokalny magnat drobiowy i wÅ‚aÅ›ciciel Domu Seniora â€Zaciszeâ€, byÅ‚ uosobieniem sukcesu transformacji. SponsorowaÅ‚ festyny, fundowaÅ‚ obiady dla ubogich i aspirowaÅ‚ do mandatu radnego powiatu. Ale pod lÅ›niÄ…cÄ… fasadÄ… â€dobrego gospodarzaâ€ kryÅ‚ siÄ™ mechanizm zbrodni tak cyniczny, Å¼e aÅ¼ genialny w swojej prostocie.

      II. Mechanizm przestÄ™pstwa: Å»ywe trupy

      Wszystko zaczÄ™Å‚o siÄ™ od rzÄ…dowego programu dopÅ‚at dla przedsiÄ™biorcÃ³w zatrudniajÄ…cych osoby powyÅ¼ej 70. roku Å¼ycia. PaÅ„stwo, chcÄ…c ratowaÄ‡ budÅ¼et ZUS, pÅ‚aciÅ‚o ogromne kwoty za kaÅ¼dego zatrudnionego seniora. SkowroÅ„ski dostrzegÅ‚ w tym szansÄ™. WÅ‚aÅ›ciciel zarÃ³wno fermy drobiu, jak i Domu StarcÃ³w "Zacisze" miaÅ‚ unikalnÄ… pozycjÄ™ â€“ kontrolowaÅ‚ przepÅ‚yw informacji o pensjonariuszach. Kiedy ktÃ³ryÅ› z pensjonariuszy umieraÅ‚, zgon nie byÅ‚ zgÅ‚aszany do UrzÄ™du Stanu Cywilnego. Dokumenty zmarÅ‚ego â€“ PESEL, dane osobowe, historia zatrudnienia â€“ trafiaÅ‚y do "ewidencji pracownikÃ³w" fermy.

      W rzeczywistoÅ›ci na fermie pracowali nielegalni imigranci, gÅ‚Ã³wnie z krajÃ³w byÅ‚ego bloku wschodniego. Ludzie zdesperowani, Å¼yjÄ…cy w ciÄ…gÅ‚ym strachu przed deportacjÄ…, gotowi pracowaÄ‡ za stawki znacznie poniÅ¼ej minimum pÅ‚acy, bez umÃ³w, praw, zabezpieczeÅ„. Dla polskiego paÅ„stwa jednak wszystko byÅ‚o w porzÄ…dku. W papierach pracowali polscy obywatele, wielu w wieku powyÅ¼ej 70 lat, co kwalifikowaÅ‚o SkowroÅ„skiego do rzÄ…dowych dotacji.

      SkowroÅ„ski zarabiaÅ‚ podwÃ³jnie â€“ na paÅ„stwowych dotacjach oraz na taniej, nielegalnej sile roboczej. System dziaÅ‚aÅ‚ latami, bo byÅ‚ chroniony od Å›rodka.

      III. Tarcza: Braterska Krew

      KluczowÄ… postaciÄ… tego ukÅ‚adu byÅ‚ Marek Nowak â€“ prokurator rejonowy. Oficjalnie: bezstronny urzÄ™dnik paÅ„stwowy. Nieoficjalnie: przyrodni brat Janusza SkowroÅ„skiego, syn tej samej matki, rÃ³Å¼nych ojcÃ³w. PokrewieÅ„stwo nigdy nie zostaÅ‚o ujawnione, choÄ‡ w mieÅ›cie krÄ…Å¼yÅ‚y plotki. To wystarczaÅ‚o, by nikt nie zadawaÅ‚ pytaÅ„ zbyt gÅ‚oÅ›no.
      Nowak systematycznie umarzaÅ‚ niewygodne sprawy, blokowaÅ‚ postÄ™powania i tonowaÅ‚ sygnaÅ‚y pÅ‚ynÄ…ce z policji. W zamian SkowroÅ„ski mÃ³gÅ‚ bez przeszkÃ³d rozwijaÄ‡ swoje interesy â€“ a w 1998 roku postanowiÅ‚ pÃ³jÅ›Ä‡ o krok dalej. WystartowaÅ‚ w wyborach samorzÄ…dowych na radnego powiatu piotrkowskiego. Wygrana dawaÅ‚a mu nie tylko prestiÅ¼, ale formalny wpÅ‚yw na lokalne decyzje.
      Bracia stworzyli paÅ„stwo w paÅ„stwie, w ktÃ³rym prawo sÅ‚uÅ¼yÅ‚o jedynie ochronie ich dochodowego biznesu.

      IV. Åšledztwo Wolskiego

      Redaktor Wolski zaczÄ…Å‚ Å‚Ä…czyÄ‡ kropki, gdy zauwaÅ¼yÅ‚, Å¼e na liÅ›cie pracownikÃ³w fermy figurujÄ… nazwiska ludzi, ktÃ³rych nekrologi widziaÅ‚ w parafialnej gablocie. DziÄ™ki pomocy anonimowego informatora z biura SkowroÅ„skiego, Wolski zyskaÅ‚ wglÄ…d w listy pÅ‚ac. PrÃ³bowaÅ‚ uzyskaÄ‡ informacje w lokalnych instytucjach â€“ w policji, w prokuraturze. WszÄ™dzie natrafiaÅ‚ na mur milczenia. UrzÄ™dnicy albo nie widzieli problemu, albo nie chcieli go widzieÄ‡. KtoÅ› w tle skutecznie blokowaÅ‚ kaÅ¼dÄ… prÃ³bÄ™ formalnego dochodzenia.

      WidzÄ…c, Å¼e lokalne struktury sÄ… skorumpowane, Wolski podjÄ…Å‚ desperackÄ… decyzjÄ™. SkontaktowaÅ‚ siÄ™ z aspirantem sztabowym Adamem Milewskim z Komendy WojewÃ³dzkiej Policji w Åodzi. Milewski, legenda wydziaÅ‚u dochodzeniowego, czÅ‚owiek o nieposzlakowanej opinii, zaczÄ…Å‚ drÄ…Å¼yÄ‡. Nie wiedziaÅ‚ jednak, Å¼e czas dziaÅ‚a na jego niekorzyÅ›Ä‡. Wybory samorzÄ…dowe zbliÅ¼aÅ‚y siÄ™ wielkimi krokami. Publikacja materiaÅ‚Ã³w Wolskiego oznaczaÅ‚aby dla SkowroÅ„skiego nie tylko koniec marzeÅ„ o polityce, ale i wieloletnie wiÄ™zienie.

      V. Zbrodnia

      ZbliÅ¼ajÄ… siÄ™ wybory. Afera moÅ¼e wybuchnÄ…Ä‡ w kaÅ¼dej chwili. Bracia decydujÄ… siÄ™ na rozwiÄ…zanie siÅ‚owe. Tomasz Wolski zostaje porwany. Plan jest prosty: przetrzymaÄ‡ go do czasu wyborÃ³w, a potem â€rozwiÄ…zaÄ‡ problemâ€ na staÅ‚e. Åšwiadkiem tego wydarzenia byÅ‚ Jerzy Kaczmarek, wieloletni pracownik fermy, ktÃ³ry przypadkiem znalazÅ‚ siÄ™ w zÅ‚ym miejscu o zÅ‚ym czasie. SkowroÅ„ski i Nowak nie mogli pozwoliÄ‡ na kolejnego Å›wiadka. ÅšmierÄ‡ Kaczmarka zostaÅ‚a upozorowana jako samobÃ³jstwo przez przedawkowanie lekÃ³w. Nowak osobiÅ›cie nadzorowaÅ‚ czynnoÅ›ci na miejscu zdarzenia, zamykajÄ…c sprawÄ™ w rekordowe dwie godziny.

      SkowroÅ„ski jest przekonany, Å¼e sytuacja zostaÅ‚a opanowana. Myli siÄ™.

      Do miasta przyjeÅ¼dÅ¼a Adam Milewski. Kontynuuje Å›ledztwo, prÃ³buje ponownie kontaktowaÄ‡ siÄ™ z policjÄ… i prokuraturÄ… w Piotrkowie. Spotyka siÄ™ z tym samym murem milczenia. WkrÃ³tce sam staje siÄ™ celem. Ginie w upozorowanym wypadku samochodowym â€“ zepchniÄ™ty z drogi, uderza w drzewo. Oficjalnie: tragiczny zbieg okolicznoÅ›ci.

      Po Adamie Milewskim pozostaÅ‚ tylko zniszczony notatnik, znaleziony w gruzach samochodu. PeÅ‚en niekompletnych zapiskÃ³w, szyfrÃ³w, niedokoÅ„czonych tropÃ³w, nazwisk, dat. Notatnik, ktÃ³ry cudem przetrwaÅ‚ i trafiÅ‚ w odpowiednie rÄ™ce. Twoje

      VI. WYÅšCIG Z CZASEM

      Masz juÅ¼ wszystko, czego potrzebowaÅ‚eÅ›, by zamknÄ…Ä‡ to Å›ledztwo i odnaleÅºÄ‡ Tomasza Wolskiego. Czy zdÄ…Å¼ysz go uratowaÄ‡?



    </div>
    <button class="close-modal-btn" onclick="goToFinalPage()">ZAKOÅƒCZ ÅšLEDZTWO</button>
  </div>
</div>

<script>
const puzzles = {
  1: {
    title: "DostÄ™p",
    hint: "HasÅ‚o do komputera Milewskiego",
    answer: ["luna", "luna"],
    solved: false
  },
  2: {
    title: "Rozeznanie",
    hint: "Gdzie dzieje siÄ™ historia?",
    answer: ["piotrkÃ³w", "milejow", "Milejow", "MilejÃ³w", "milejÃ³w","PiotrkÃ³w"],
    solved: false
  },
  3: {
    title: "Dziennikarska enigma",
    hint: "Co ukryÅ‚ w mailu Wolski?",
    answer: ["wypadek", "wypadek samochodowy", "Å›mierÄ‡"],
    solved: false
  },
  4: {
    title: "Sudoku",
    hint: "Ukryta informacja",
    answer: ["sudoku"],
    solved: false
  },
  5: {
    title: "Snake",
    hint: "Ukryte informacja #2",
    answer: ["snake"],
    solved: false
  },
  6: {
    title: "Odskocznia",
    hint: "Gdzie znajduje siÄ™ koÅ›ciÃ³Å‚ [miasto]",
    answer: ["sutomore", "Sutomore", "podgorica", "Podgorica"],
    solved: false
  },
  7: {
    title: "Lista PracownikÃ³w",
    hint: "CoÅ› nie zgadza siÄ™ w pliku CSV. OdpowiedziÄ… jest PESEL",
    answer: ["pesel"],
    solved: false
  },
  8: {
    title: "PowiÄ…zania Rodzinne",
    hint: "Kto chroni Skrowonskiego? SprawdÅº relacje.",
    answer: ["brat", "nowak", "prokurator"],
    solved: false
  }
};

let gameState = JSON.parse(localStorage.getItem('detectiveGame')) || {
  solved: {},
  completed: false
};

function render() {
  const grid = document.getElementById('puzzleGrid');
  grid.innerHTML = '';
  
  let solvedCount = 0;
  const totalCount = Object.keys(puzzles).length;
  
  Object.keys(puzzles).forEach(id => {
    const puzzle = puzzles[id];
    const isSolved = gameState.solved[id];
    const puzzleNum = parseInt(id);

    // Zagadka jest dostÄ™pna tylko jeÅ›li poprzednia zostaÅ‚a rozwiÄ…zana
    // Zagadka #1 jest zawsze dostÄ™pna
    const isUnlocked = puzzleNum === 1 || gameState.solved[puzzleNum - 1];

    if (isSolved) solvedCount++;

    const card = document.createElement('div');
    // Dodajemy klasÄ™ 'locked-stealth' jeÅ›li zagadka jest caÅ‚kowicie ukryta
    card.className = `puzzle-card ${isSolved ? 'solved' : isUnlocked ? 'unlocked' : 'locked'}`;

    let statusIcon = isSolved ? 'âœ“' : (isUnlocked ? 'â“' : 'ğŸ”’');

    // Budujemy zawartoÅ›Ä‡ karty w zaleÅ¼noÅ›ci od statusu odblokowania
    if (isUnlocked) {
      // Widok odblokowanej zagadki (to co widzi gracz po rozwiÄ…zaniu poprzedniej)
      card.innerHTML = `
        <div class="puzzle-header">
          <div class="puzzle-number">ZAGADKA #${id}</div>
          <div class="puzzle-status">${statusIcon}</div>
        </div>
        <div class="puzzle-title">${puzzle.title}</div>
        <div class="puzzle-hint">${puzzle.hint}</div>
        ${!isSolved ? `
          <div class="puzzle-input-group">
            <input type="text" class="puzzle-input" id="input-${id}" placeholder="Wpisz rozwiÄ…zanie...">
            <button class="solve-btn" onclick="solvePuzzle(${id})">SprawdÅº</button>
          </div>
        ` : `
          <div class="puzzle-solved-msg">âœ“ MATERIAÅ ZWERYFIKOWANY</div>
        `}
      `;
    } else {
      // Widok caÅ‚kowicie zablokowanej zagadki (ukrywamy tytuÅ‚ i treÅ›Ä‡)
      card.innerHTML = `
        <div class="puzzle-header">
          <div class="puzzle-number" style="color: #444;">ZAGADKA #${id}</div>
          <div class="puzzle-status">ğŸ”’</div>
        </div>
        <div class="puzzle-title" style="color: #444; filter: blur(4px);">UTAJNIONY TYTUÅ</div>
        <div class="puzzle-hint">Dane sÄ… zaszyfrowane. RozwiÄ…Å¼ sprawÄ™ #${puzzleNum - 1}, aby uzyskaÄ‡ dostÄ™p do tych akt.</div>
        <div class="unlock-code" style="border-color: #444; color: #444;">DOSTÄ˜P ZABLOKOWANY</div>
      `;
    }

    grid.appendChild(card);
  });

// Aktualizacja statystyk
  document.getElementById('solvedCount').textContent = solvedCount;
  document.getElementById('totalCount').textContent = totalCount;
  document.getElementById('progressPercent').textContent =
    Math.round((solvedCount / totalCount) * 100) + '%';

  if (solvedCount === totalCount) {
    document.getElementById('finishSection').style.display = 'block';
  }
}

function openPuzzle(id) {
  alert(`ğŸ” Zagadka #${id}: ${puzzles[id].title}\n\nStrona z tÄ… zagadkÄ… bÄ™dzie dostÄ™pna wkrÃ³tce...`);
}

function solvePuzzle(id) {
  const input = document.getElementById(`input-${id}`);
  const userAnswer = input.value.toLowerCase().trim();
  const correctAnswers = puzzles[id].answer;
  
  // SprawdÅº czy answer to tablica czy string
  const isCorrect = Array.isArray(correctAnswers) 
    ? correctAnswers.map(a => a.toLowerCase()).includes(userAnswer)
    : userAnswer === correctAnswers.toLowerCase();
  
  if (isCorrect) {
    gameState.solved[id] = true;
    localStorage.setItem('detectiveGame', JSON.stringify(gameState));
    // Na to (bezpieczniejsze):
    if (String(id) === '6') {
      localStorage.setItem('puzzle6Unlocked', 'true');
      console.log("Warunek dla zagadki 6 speÅ‚niony!"); // Dodaj log dla pewnoÅ›ci
      //alert('âœ“ Zagadka rozwiÄ…zana!\n\nğŸ“„ Nowe dane zostaÅ‚y zapisane na pulpicie komputera.');
    }
    // Animacja sukcesu
    input.style.borderColor = '#0f0';
    input.style.background = 'rgba(0,255,0,0.1)';
    
    setTimeout(() => {
      render();
    }, 500);
  } else {
    // Animacja bÅ‚Ä™du
    input.style.borderColor = '#f00';
    input.style.background = 'rgba(255,0,0,0.1)';
    input.classList.add('shake');
    
    setTimeout(() => {
      input.style.borderColor = '';
      input.style.background = '';
      input.classList.remove('shake');
      input.value = '';
    }, 600);
  }
}

function openStoryModal() {
  document.getElementById('storyModal').classList.add('active');
}

function goToFinalPage() {
  window.location.href = 'final.html';
}

function unlockAll() {
  // Funkcja nieuÅ¼ywana - pozostawiona dla kompatybilnoÅ›ci
  console.log('All puzzles are already visible');
}

function resetGame() {
  if (confirm('ZresetowaÄ‡ caÅ‚Ä… grÄ™?')) {
    localStorage.removeItem('detectiveGame');
    location.reload();
  }
}

document.addEventListener('keydown', (e) => {
  if (e.ctrlKey && e.shiftKey && e.key === 'R') {
    resetGame();
  }
});

render();
</script>

</body>
</html>